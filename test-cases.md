# 情報収集ビューア テストケース仕様書

## 📖 概要

本文書は、現在の Google Sheets CSV ベースシステムから、最終目標である RSS フィード管理システムへの移行を考慮したテストケースを定義します。

---

## 🎯 システム要件の整理

### 現在システム (Current System)
- Google Sheets CSV からの記事データ取得
- カテゴリ別記事表示
- localStorage による既読管理
- PWA 機能 (オフラインキャッシュ)

### 最終目標システム (Target System)
- RSS フィード管理 (登録・削除・一覧)
- 自動記事取得スケジューリング
- 重複記事回避機能
- 拡張UI (要約リンク・ソート・フィルタ)

---

## 🧪 テストケース

### 1. 現在システムのテストケース

#### 1.1 CSV データ読込テスト
| Test ID | TC_CSV_001 |
|---------|------------|
| **目的** | Google Sheets CSV からのデータ取得検証 |
| **前提条件** | Google Sheets URL が有効でアクセス可能 |
| **テスト手順** | 1. アプリケーションを起動<br>2. ネットワーク接続確認<br>3. CSV データの fetch 実行 |
| **期待結果** | CSV データが正常に取得され、PapaParse でパース成功 |
| **検証項目** | - HTTP ステータス 200<br>- CSV 形式の妥当性<br>- 必須フィールド存在確認 |

| Test ID | TC_CSV_002 |
|---------|------------|
| **目的** | CSV データパース検証 |
| **前提条件** | 有効な CSV データが取得済み |
| **テスト手順** | 1. PapaParse による CSV パース実行<br>2. パース結果の構造確認 |
| **期待結果** | 以下フィールドを含むオブジェクト配列を取得<br>- タイトル<br>- URL<br>- 要約<br>- 日付<br>- 分類 |
| **検証項目** | - 全必須フィールドの存在<br>- データ型の妥当性<br>- 文字エンコーディング |

#### 1.2 記事表示テスト
| Test ID | TC_DISPLAY_001 |
|---------|------------|
| **目的** | カテゴリ別記事表示機能検証 |
| **前提条件** | CSV データが正常にパース済み |
| **テスト手順** | 1. 記事データのカテゴリ別グループ化<br>2. UI への記事リスト表示 |
| **期待結果** | - カテゴリごとにセクション分け<br>- 各記事の情報が正しく表示 |
| **検証項目** | - カテゴリヘッダー表示<br>- 記事タイトル・要約・日付表示<br>- 外部リンクの動作 |

| Test ID | TC_DISPLAY_002 |
|---------|------------|
| **目的** | 記事詳細情報表示検証 |
| **前提条件** | 記事データが UI に表示済み |
| **テスト手順** | 1. 各記事の詳細情報確認<br>2. リンクのクリック動作確認 |
| **期待結果** | - 記事タイトルが適切に表示<br>- 要約文が表示<br>- 外部リンクが新しいタブで開く |
| **検証項目** | - タイトルリンクの動作<br>- target="_blank" 属性<br>- カテゴリ・日付情報表示 |

#### 1.3 既読管理テスト
| Test ID | TC_READ_001 |
|---------|------------|
| **目的** | 既読状態の保存機能検証 |
| **前提条件** | 記事が UI に表示済み |
| **テスト手順** | 1. 記事の「既読にする」ボタンをクリック<br>2. localStorage の内容確認 |
| **期待結果** | - 記事 URL が localStorage に保存<br>- UI から記事が削除 |
| **検証項目** | - localStorage キー "readArticles" 存在<br>- JSON 形式での URL 配列保存<br>- UI の即座更新 |

| Test ID | TC_READ_002 |
|---------|------------|
| **目的** | 既読記事のフィルタリング検証 |
| **前提条件** | 既読記事が localStorage に保存済み |
| **テスト手順** | 1. ページをリロード<br>2. 記事表示状態の確認 |
| **期待結果** | 既読済み記事が表示されない |
| **検証項目** | - 既読記事の除外<br>- 未読記事のみ表示<br>- カテゴリ別表示の維持 |

| Test ID | TC_READ_003 |
|---------|------------|
| **目的** | localStorage データの永続化検証 |
| **前提条件** | 既読記事データが保存済み |
| **テスト手順** | 1. ブラウザを再起動<br>2. アプリケーションに再アクセス |
| **期待結果** | 既読状態が保持され、既読記事が非表示 |
| **検証項目** | - データの永続化<br>- セッション間での状態保持 |

#### 1.4 PWA 機能テスト
| Test ID | TC_PWA_001 |
|---------|------------|
| **目的** | Service Worker の動作検証 |
| **前提条件** | PWA 対応ブラウザでアクセス |
| **テスト手順** | 1. 初回アクセス時の SW 登録確認<br>2. キャッシュ状態の確認 |
| **期待結果** | - Service Worker が正常に登録<br>- 必要ファイルがキャッシュされる |
| **検証項目** | - sw.js の登録成功<br>- index.html と manifest.json のキャッシュ |

| Test ID | TC_PWA_002 |
|---------|------------|
| **目的** | オフライン機能検証 |
| **前提条件** | Service Worker 登録済み、初回キャッシュ完了 |
| **テスト手順** | 1. ネットワークを無効化<br>2. アプリケーションへのアクセス |
| **期待結果** | キャッシュされたコンテンツが表示される |
| **検証項目** | - オフラインでの HTML 表示<br>- キャッシュからの読み込み |

| Test ID | TC_PWA_003 |
|---------|------------|
| **目的** | Web App インストール機能検証 |
| **前提条件** | PWA インストール条件を満たすブラウザ |
| **テスト手順** | 1. インストールプロンプトの表示確認<br>2. ホーム画面への追加実行 |
| **期待結果** | - インストールプロンプト表示<br>- アプリアイコンがホーム画面に追加 |
| **検証項目** | - manifest.json の妥当性<br>- アイコンファイルの存在<br>- インストール後の起動 |

---

### 2. 最終目標システムのテストケース

#### 2.1 RSS フィード管理テスト
| Test ID | TC_RSS_001 |
|---------|------------|
| **目的** | RSS フィード登録機能検証 |
| **前提条件** | RSS フィード管理 UI が実装済み |
| **テスト手順** | 1. RSS フィード URL を入力<br>2. 登録ボタンをクリック<br>3. フィード一覧への追加確認 |
| **期待結果** | - フィードが正常に登録される<br>- 一覧に表示される |
| **検証項目** | - URL バリデーション<br>- RSS/Atom フィード検証<br>- 重複登録の防止 |

| Test ID | TC_RSS_002 |
|---------|------------|
| **目的** | 多様なフィード形式対応検証 |
| **前提条件** | RSS 管理機能が実装済み |
| **テスト手順** | 各形式のフィードを登録テスト<br>- RSS 2.0<br>- Atom 1.0<br>- YouTube チャンネル<br>- Podcast RSS |
| **期待結果** | 全形式で正常に登録・記事取得が可能 |
| **検証項目** | - フィード形式の自動判定<br>- メディア固有要素の処理<br>- 文字エンコーディング対応 |

| Test ID | TC_RSS_003 |
|---------|------------|
| **目的** | RSS フィード削除機能検証 |
| **前提条件** | 登録済みフィードが存在 |
| **テスト手順** | 1. フィード一覧から削除対象を選択<br>2. 削除実行<br>3. 関連記事の処理確認 |
| **期待結果** | - フィード削除成功<br>- 関連記事の適切な処理 |
| **検証項目** | - カスケード削除または記事保持の選択<br>- UI からの即座削除 |

#### 2.2 自動記事取得テスト
| Test ID | TC_AUTO_001 |
|---------|------------|
| **目的** | スケジュール機能の動作検証 |
| **前提条件** | RSS フィードが登録済み、スケジューラー実装済み |
| **テスト手順** | 1. 取得間隔を設定（日次/週次）<br>2. スケジュール実行の監視 |
| **期待結果** | 設定した間隔で自動的に記事取得が実行される |
| **検証項目** | - タイマー機能の正確性<br>- バックグラウンド実行<br>- エラー時の再試行機能 |

| Test ID | TC_AUTO_002 |
|---------|------------|
| **目的** | 重複記事回避機能検証 |
| **前提条件** | 同一記事を含む複数フィードが登録済み |
| **テスト手順** | 1. 記事取得実行<br>2. 重複記事の処理確認<br>3. guid/pubDate による識別確認 |
| **期待結果** | 重複記事が除外され、一意な記事のみ保存される |
| **検証項目** | - GUID による重複判定<br>- pubDate + タイトルによる判定<br>- URL による重複チェック |

| Test ID | TC_AUTO_003 |
|---------|------------|
| **目的** | 増分更新機能検証 |
| **前提条件** | 過去の取得履歴が存在 |
| **テスト手順** | 1. 最後の取得日時以降の記事のみ取得<br>2. 処理対象記事数の確認 |
| **期待結果** | 新規記事のみが取得され、既存記事は再処理されない |
| **検証項目** | - 最終取得日時の記録<br>- 条件付き取得の実行<br>- パフォーマンスの向上 |

#### 2.3 拡張UI機能テスト
| Test ID | TC_UI_001 |
|---------|------------|
| **目的** | 要約リンク/ボタン機能検証 |
| **前提条件** | YouTube/Podcast 記事が存在 |
| **テスト手順** | 1. メディア記事の要約ボタン表示確認<br>2. 要約リクエスト機能の動作確認 |
| **期待結果** | - YouTube/Podcast のみに要約ボタン表示<br>- 要約生成または要約ページへの遷移 |
| **検証項目** | - メディア種別の自動判定<br>- 要約機能の統合<br>- UI の条件分岐 |

| Test ID | TC_UI_002 |
|---------|------------|
| **目的** | ソート・フィルタ機能検証 |
| **前提条件** | 複数日時・複数フィードの記事が存在 |
| **テスト手順** | 1. 日付順ソート実行<br>2. フィード別フィルタ適用<br>3. カテゴリ別フィルタ適用 |
| **期待結果** | - 指定条件での記事絞り込み<br>- ソート順の正確性 |
| **検証項目** | - 日付降順・昇順ソート<br>- 複数条件でのフィルタリング<br>- UI の応答性 |

| Test ID | TC_UI_003 |
|---------|------------|
| **目的** | レスポンシブデザイン検証 |
| **前提条件** | 各種デバイスでの表示テスト環境 |
| **テスト手順** | 1. モバイル画面での表示確認<br>2. タブレット画面での操作確認<br>3. デスクトップでの全機能確認 |
| **期待結果** | 全デバイスで適切なレイアウトと操作性を提供 |
| **検証項目** | - レスポンシブブレークポイント<br>- タッチ操作の対応<br>- フォントサイズの適応 |

---

### 3. システム移行テストケース

#### 3.1 データ移行テスト
| Test ID | TC_MIG_001 |
|---------|------------|
| **目的** | 既存データの新形式への移行検証 |
| **前提条件** | 現在システムに既読データが存在 |
| **テスト手順** | 1. 移行スクリプト実行<br>2. データ形式変換の確認<br>3. 移行後データの整合性確認 |
| **期待結果** | - 既読状態が新システムでも保持<br>- データ損失なし |
| **検証項目** | - localStorage から新 DB への移行<br>- URL ベース既読管理の継続<br>- 移行ログの記録 |

#### 3.2 後方互換性テスト
| Test ID | TC_COMPAT_001 |
|---------|------------|
| **目的** | 現在システム機能の動作継続性検証 |
| **前提条件** | 新システムが実装済み |
| **テスト手順** | 1. 現在の Google Sheets CSV 機能の動作確認<br>2. 既存 UI の表示確認 |
| **期待結果** | RSS 機能追加後も既存機能が正常動作 |
| **検証項目** | - CSV フィード対応の継続<br>- 既存 UI の保持<br>- 設定の共存 |

---

## 🚀 テスト実行計画

### Phase 1: 現在システム検証
1. CSV データ取得・表示機能の全面テスト
2. 既読管理機能の動作確認
3. PWA 機能の検証

### Phase 2: 最終目標システム開発・テスト
1. RSS 管理機能の実装・テスト
2. 自動取得機能の実装・テスト
3. 拡張 UI の実装・テスト

### Phase 3: 統合・移行テスト
1. 新旧システムの統合テスト
2. データ移行の検証
3. 本番環境での最終確認

---

## 📊 成功基準

### 現在システム
- ✅ 全テストケースが PASS
- ✅ レスポンス時間 < 3秒
- ✅ オフライン機能の動作
- ✅ 既読状態の永続化

### 最終目標システム  
- ✅ RSS フィード管理の完全動作
- ✅ 自動取得の安定動作（24時間以上）
- ✅ 重複記事ゼロの維持
- ✅ 全ブラウザでの動作確認

---

*テストケース作成日: 2025-06-28*  
*対象システム: 情報収集ビューア (claude_myNewsfeeder)*